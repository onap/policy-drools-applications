{
  "comments": [
    {
      "key": {
        "uuid": "b6c641e8_7de80b69",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/SerialWorkQueue.java",
        "patchSetId": 20
      },
      "lineNbr": 74,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-08-27T20:24:12Z",
      "side": 1,
      "message": "Not sure about this .. seems to me that this public method when invoked by 2 or more threads could get to the processQueue method an invoke \"run()\" on the same runnable on line 111.   Note that the element is not removed from the queue until line 118, hence I read correctly, the potential for processing the same tasks multiple times.",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "603e8aa4_f77a0943",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/SerialWorkQueue.java",
        "patchSetId": 20
      },
      "lineNbr": 74,
      "author": {
        "id": 811
      },
      "writtenOn": "2020-08-27T22:39:05Z",
      "side": 1,
      "message": "I don\u0027t think so.\n\nscenario A) two threads invoke start(): only the first invokes processQueue(), because the second returns via line 68\n\nscenario B) one thread invokes start(), another invokes queueAndRun() after synchronized block begins: first thread gets null on line 72 and does not invoke processQueue().  Second thread does not hit line 92 thus invokes processQueue()\n\nscenario C) one thread invokes start(), another invokes queueAndRun() and enters synchronized block first: second thread returns on line 92 when it finds it isn\u0027t running.  First thread gets the item added by the second thread and executes it on line 76\n\nscenario D) after start() completes, two threads invoke queueAndRun(): the first thread to synchronize will add an item and then process it.  Second thread will add its item and return via line 92 when it finds that the queue contains more than one item",
      "parentUuid": "b6c641e8_7de80b69",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24aff03e_5716bc62",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/SerialWorkQueue.java",
        "patchSetId": 20
      },
      "lineNbr": 74,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-08-27T22:53:28Z",
      "side": 1,
      "message": "Right, thanks for taking the time to write it down.  I retract my comment, I obviated the \"running\" if on line 66 when I was modeling the overlapping scenarios on my head.",
      "parentUuid": "603e8aa4_f77a0943",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "430105d5_b428e5e3",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/TdjamController.java",
        "patchSetId": 20
      },
      "lineNbr": 77,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-08-27T20:24:12Z",
      "side": 1,
      "message": "should all of these fields have an access modified, sonar may give issues",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3875e156_7398ac15",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/TdjamController.java",
        "patchSetId": 20
      },
      "lineNbr": 77,
      "author": {
        "id": 2477
      },
      "writtenOn": "2020-08-27T21:45:19Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "430105d5_b428e5e3",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "62517914_58abf1dc",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/TdjamController.java",
        "patchSetId": 20
      },
      "lineNbr": 92,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-08-27T20:24:12Z",
      "side": 1,
      "message": "These should be marked as final",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9dd2e86a_36e7fcd4",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/TdjamController.java",
        "patchSetId": 20
      },
      "lineNbr": 92,
      "author": {
        "id": 2477
      },
      "writtenOn": "2020-08-27T21:45:19Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "62517914_58abf1dc",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "96c42e11_2a1c91ac",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/TdjamController.java",
        "patchSetId": 20
      },
      "lineNbr": 137,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-08-27T20:24:12Z",
      "side": 1,
      "message": "Not sure how topic data is used but topics are typically global entities that are started by the framework ..   Controllers registers for messages and topics are shared.   Not sure how this works and manages automatically, but I tend to think that it shouldn\u0027t and share the infrastructure.",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5815b489_81178806",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/TdjamController.java",
        "patchSetId": 20
      },
      "lineNbr": 137,
      "author": {
        "id": 811
      },
      "writtenOn": "2020-08-27T22:39:05Z",
      "side": 1,
      "message": "I think this is OK, as the TopicData is just a TopicListener",
      "parentUuid": "96c42e11_2a1c91ac",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "614396f4_1697b533",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/TdjamController.java",
        "patchSetId": 20
      },
      "lineNbr": 330,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-08-27T20:24:12Z",
      "side": 1,
      "message": "would be good to add to telemetry api similar functionality",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d41e855a_1e269278",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/TdjamController.java",
        "patchSetId": 20
      },
      "lineNbr": 330,
      "author": {
        "id": 2477
      },
      "writtenOn": "2020-08-27T21:45:19Z",
      "side": 1,
      "message": "POLICY-2805 created",
      "parentUuid": "614396f4_1697b533",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2ca2fc9_f49fe129",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/controlloop/tdjam/TdjamController.java",
        "patchSetId": 20
      },
      "lineNbr": 330,
      "author": {
        "id": 2477
      },
      "writtenOn": "2020-08-27T22:39:20Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d41e855a_1e269278",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2ac4b702_eb17a095",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/extension/system/NonDroolsPolicyController.java",
        "patchSetId": 20
      },
      "lineNbr": 443,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-08-27T20:24:12Z",
      "side": 1,
      "message": "IllegalStateException probably better",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1de74a6e_c69b9d6c",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/extension/system/NonDroolsPolicyController.java",
        "patchSetId": 20
      },
      "lineNbr": 443,
      "author": {
        "id": 2477
      },
      "writtenOn": "2020-08-27T21:45:19Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "2ac4b702_eb17a095",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b61371d0_45a305f6",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/extension/system/NonDroolsPolicyController.java",
        "patchSetId": 20
      },
      "lineNbr": 496,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-08-27T20:24:12Z",
      "side": 1,
      "message": "The following methods seem duplicated functionality with MavenDroolsController - consider if they can be consolidated in the drools-pdp somewhere",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f693fa31_ac1f063f",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/extension/system/NonDroolsPolicyController.java",
        "patchSetId": 20
      },
      "lineNbr": 496,
      "author": {
        "id": 2477
      },
      "writtenOn": "2020-08-27T22:38:06Z",
      "side": 1,
      "message": "POLICY-2806 to track on this. I put it on H-Rel",
      "parentUuid": "b61371d0_45a305f6",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87b256ed_1393814f",
        "filename": "controlloop/common/controller-tdjam/src/main/java/org/onap/policy/extension/system/NonDroolsPolicyController.java",
        "patchSetId": 20
      },
      "lineNbr": 496,
      "author": {
        "id": 2477
      },
      "writtenOn": "2020-08-27T22:39:20Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f693fa31_ac1f063f",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e24ba65_06a8ff76",
        "filename": "controlloop/common/eventmanager/src/main/java/org/onap/policy/controlloop/eventmanager/ControlLoopEventManager2Drools.java",
        "patchSetId": 20
      },
      "lineNbr": 5,
      "author": {
        "id": 477
      },
      "writtenOn": "2020-08-27T20:24:12Z",
      "side": 1,
      "message": "2020",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "314dcc9b_e75b7993",
        "filename": "controlloop/common/eventmanager/src/main/java/org/onap/policy/controlloop/eventmanager/ControlLoopEventManager2Drools.java",
        "patchSetId": 20
      },
      "lineNbr": 5,
      "author": {
        "id": 2477
      },
      "writtenOn": "2020-08-27T21:45:19Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "2e24ba65_06a8ff76",
      "revId": "a7715e3cc538de2ae4b291525921216d969bf7f6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}