{
  "comments": [
    {
      "key": {
        "uuid": "1a2f8d8d_cc9686f0",
        "filename": "controlloop/templates/archetype-cl-amsterdam/src/main/resources/archetype-resources/src/main/resources/__closedLoopControlName__.drl",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 477
      },
      "writtenOn": "2017-10-31T15:27:17Z",
      "side": 1,
      "message": "may be a tiny bit safer to do\n\n$event.closedLoopEventStatus !\u003d ControlLoopEventStatus.ONSET\n\njust in case there is some other values (which there should not be)",
      "revId": "86cc0e9a90b150082969c044da14b26905b52455",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a2f8d8d_4cb1768e",
        "filename": "controlloop/templates/archetype-cl-amsterdam/src/main/resources/archetype-resources/src/main/resources/__closedLoopControlName__.drl",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 57
      },
      "writtenOn": "2017-10-31T15:39:42Z",
      "side": 1,
      "message": "well maybe that should be a different check and a different reject message if it isn\u0027t abated. I thought we had that in another method but perhaps that got changed. Its good to track the spurious abatements so we can hopefully get that changed in the future.",
      "parentUuid": "1a2f8d8d_cc9686f0",
      "revId": "86cc0e9a90b150082969c044da14b26905b52455",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a2f8d8d_6c3f92d7",
        "filename": "controlloop/templates/archetype-cl-amsterdam/src/main/resources/archetype-resources/src/main/resources/__closedLoopControlName__.drl",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 477
      },
      "writtenOn": "2017-10-31T16:03:14Z",
      "side": 1,
      "message": "The code as is if we get any value other than abated in the closed loop event status it will fall into line 208 as is a plain catch-all else, under the perhaps wrong assumption that is an onset (unless the ControlLoopEventManager throws an exception in line 212).   I think it may be better as we only want lines 208-260 to be executed only for ONSET to ensure that\u0027s the case, and this is the earliest point.\n\nI think the REJECT notification can be changed to account for ABATED and unexpected others by putting it in the message (that goes into the notification message), something like\n\nthrow new ControlLoopException($event.closedLoopEventStatus + \" received with no prior onset\");\n\nIn any case, this version solves the problem, and we don\u0027t anticipate to get anything else in a trusted environment with dcae, so I\u0027m Ok with the work.",
      "parentUuid": "1a2f8d8d_4cb1768e",
      "revId": "86cc0e9a90b150082969c044da14b26905b52455",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a2f8d8d_8cb75e86",
        "filename": "controlloop/templates/archetype-cl-amsterdam/src/main/resources/archetype-resources/src/main/resources/__closedLoopControlName__.drl",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 1677
      },
      "writtenOn": "2017-10-31T16:16:25Z",
      "side": 1,
      "message": "Do you think maybe that should be a filter check? Currently the filter for the topic is \"closedLoopEventStatus\u003d.*\" perhaps we should ensure that the filter checks that the eventStatus is either onset or abatement, that way it is binary (ONSET or ABATED). What do you think?",
      "parentUuid": "1a2f8d8d_cc9686f0",
      "revId": "86cc0e9a90b150082969c044da14b26905b52455",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a2f8d8d_2f64dce3",
        "filename": "controlloop/templates/archetype-cl-amsterdam/src/main/resources/archetype-resources/src/main/resources/__closedLoopControlName__.drl",
        "patchSetId": 2
      },
      "lineNbr": 205,
      "author": {
        "id": 477
      },
      "writtenOn": "2017-10-31T16:45:52Z",
      "side": 1,
      "message": "we could do that an OR regex in the filters.   I don\u0027t think is critical though, may be better to not do anything, and let downstream systems know via notification that there is something funky going on getting this messages.   If they are filtered out, they are silently discarded.",
      "parentUuid": "1a2f8d8d_8cb75e86",
      "revId": "86cc0e9a90b150082969c044da14b26905b52455",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    }
  ]
}